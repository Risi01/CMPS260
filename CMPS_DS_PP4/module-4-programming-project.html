<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CMPS 260: Module 4 Programming Project</title>
<style>* { font-family: monospace; }</style>
<script>

// Project //

console.log("Project");

  
// 1. Implement the set data structure using prototype

function Set() {
  this.items = {};
}

Set.prototype.has = function(value) {
  return Object.prototype.hasOwnProperty.call(this.items, value);
};

Set.prototype.add = function(value) {
  if (!this.has(value)) {
    this.items[value] = value;
    return true;
  }
  return false;
};

Set.prototype.delete = function(value) {
  if (this.has(value)) {
    delete this.items[value];
    return true;
  }
  return false;
};

Set.prototype.clear = function() {
  this.items = {};
};

Set.prototype.size = function() {
  return Object.keys(this.items).length;
};

Set.prototype.values = function() {
  return Object.keys(this.items);
};

// ---- Set operations ----
Set.prototype.union = function(otherSet) {
  var unionSet = new Set();
  var values = this.values();
  for (var i = 0; i < values.length; i++) {
    unionSet.add(values[i]);
  }
  values = otherSet.values();
  for (i = 0; i < values.length; i++) {
    unionSet.add(values[i]);
  }
  return unionSet;
};

Set.prototype.intersection = function(otherSet) {
  var interSet = new Set();
  var values = this.values();
  for (var i = 0; i < values.length; i++) {
    if (otherSet.has(values[i])) {
      interSet.add(values[i]);
    }
  }
  return interSet;
};

Set.prototype.difference = function(otherSet) {
  var diffSet = new Set();
  var values = this.values();
  for (var i = 0; i < values.length; i++) {
    if (!otherSet.has(values[i])) {
      diffSet.add(values[i]);
    }
  }
  return diffSet;
};

Set.prototype.subset = function(otherSet) {
  var values = this.values();
  for (var i = 0; i < values.length; i++) {
    if (!otherSet.has(values[i])) {
      return false;
    }
  }
  return true;
};

  
// Attendance example using the Set implementation


var allStudents = new Set();
["Mary", "Joe", "Tim", "Rosalee", "Vincent", "Caroline"].forEach(function(s) {
  allStudents.add(s);
});

var class1 = new Set();
["Rosalee", "Joe", "Mary", "Tim"].forEach(function(s) {
  class1.add(s);
});

var class2 = new Set();
["Mary", "Tim", "Vincent", "Rosalee", "Caroline"].forEach(function(s) {
  class2.add(s);
});

var class3 = new Set();
["Caroline", "Tim", "Vincent", "Rosalee", "Joe"].forEach(function(s) {
  class3.add(s);
});

console.log("All students:", allStudents.values());
console.log("Class 1:", class1.values());
console.log("Class 2:", class2.values());
console.log("Class 3:", class3.values());

// 3. Students who attended at least one class
var attendedAtLeastOne = class1.union(class2).union(class3);
console.log("Students who attended at least one class:", attendedAtLeastOne.values());

// 4. Students who attended all classes
var attendedAll = class1.intersection(class2).intersection(class3);
console.log("Students who attended all classes:", attendedAll.values());

// 5. Subset checks
console.log("At-least-one set subset of all students?", attendedAtLeastOne.subset(allStudents));
console.log("All-classes set subset of all students?", attendedAll.subset(allStudents));


// 6. Dictionary using prototype

function Dictionary() {
  this.items = {};
}

Dictionary.prototype.has = function(key) {
  return Object.prototype.hasOwnProperty.call(this.items, key);
};

Dictionary.prototype.set = function(key, value) {
  this.items[key] = value;
};

Dictionary.prototype.delete = function(key) {
  if (this.has(key)) {
    delete this.items[key];
    return true;
  }
  return false;
};

Dictionary.prototype.get = function(key) {
  return this.has(key) ? this.items[key] : undefined;
};

Dictionary.prototype.clear = function() {
  this.items = {};
};

Dictionary.prototype.size = function() {
  return Object.keys(this.items).length;
};

Dictionary.prototype.keys = function() {
  return Object.keys(this.items);
};

Dictionary.prototype.values = function() {
  var keys = this.keys();
  var vals = [];
  for (var i = 0; i < keys.length; i++) {
    vals.push(this.items[keys[i]]);
  }
  return vals;
};

Dictionary.prototype.print = function() {
  var keys = this.keys();
  for (var i = 0; i < keys.length; i++) {
    console.log(keys[i] + " - " + this.items[keys[i]]);
  }
};

  
// 7. Dictionary merge()

Dictionary.prototype.merge = function(dict) {
  var keys = dict.keys();
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    var value = dict.get(key);
    this.set(key, value); 
  }
};

// Test merge
console.log("Dictionary merge test:");
var dict1 = new Dictionary();
dict1.set("key1", "val1");
dict1.set("key2", "val2");
dict1.set("key3", "val3");

var dict2 = new Dictionary();
dict2.set("key3", "val3b");
dict2.set("key4", "val4");

dict1.merge(dict2);
dict1.print();


// 8. HashTable using prototype

function HashTable() {
  this.table = [];
}

HashTable.prototype.loseloseHashCode = function(key) {
  var hash = 0;
  for (var i = 0; i < key.length; i++) {
    hash += key.charCodeAt(i);
  }
  return hash % 37;
};

HashTable.prototype.put = function(key, value) {
  var position = this.loseloseHashCode(key);
  this.table[position] = value;
};

HashTable.prototype.get = function(key) {
  var position = this.loseloseHashCode(key);
  return this.table[position];
};

HashTable.prototype.remove = function(key) {
  var position = this.loseloseHashCode(key);
  if (this.table[position] !== undefined) {
    delete this.table[position];
    return true;
  }
  return false;
};

HashTable.prototype.print = function() {
  for (var i = 0; i < this.table.length; i++) {
    if (this.table[i] !== undefined) {
      console.log(i + ": " + this.table[i]);
    }
  }
};

// HashTable tests
console.log("HashTable tests:");
var ht = new HashTable();
ht.put("name", "Maurice");
ht.put("course", "CMPS 260");
ht.put("project", "Module 4");

ht.print();
console.log("Get 'name':", ht.get("name"));
console.log("Remove 'course':", ht.remove("course"));
ht.print();

</script>
</head>
<body>
  See console!
</body>
</html>

